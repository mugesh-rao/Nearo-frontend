import{r as i,_ as P,v as E,w as I,b as z,i as A,k as C,h as x,j as e,D as g,y as m,T as f,e as O}from"./index-70997a97.js";import{O as T,A as q,a as F,d as M,b as Q}from"./OrderSkeleton-269513a0.js";import{I as R}from"./index.es-9acb4e93.js";import"./Skeleton-1722e138.js";const Y=i.lazy(()=>P(()=>import("./index-70997a97.js").then(n=>n.bC),["assets/index-70997a97.js","assets/index-52a015f8.css"])),J=()=>{const{activeLinkParam:n}=E(),h=I(),y=z(),[p,_]=i.useState(n);i.useEffect(()=>{_(n)},[n]),i.useEffect(()=>{_(h.pathname)},[h]);const[N,b]=i.useState(!0),[c,w]=i.useState(0),S=s=>O({url:"/orders/get_cancelled_order_list",method:"post",data:s}),a=A(),{mutate:u,isLoading:j}=C(S,{onSuccess:s=>{console.log(s==null?void 0:s.data.data);const d=new Set(t.map(r=>r.product_id)),o=s==null?void 0:s.data.data.filter(r=>!d.has(r.product_id));D(r=>{const L=new Set(o.map(l=>l.product_id));return[...r.filter(l=>!L.has(l.product_id)),...o]}),(t==null?void 0:t.length)===0&&b(!1),a.invalidateQueries("low_stocks_data")},onError:s=>{console.log(s)},retry:{maxAttempts:3,delay:s=>s*1e3}}),[t,D]=i.useState(i.useMemo(()=>{const s=a.getQueryData("session_id");return s?s.data:[]},[a]));i.useEffect(()=>{if(!x())y("/login");else{const s=new FormData;s.append("session_id",x()),s.append("page",c),u(s)}},[]);const k=()=>{const s=c+1;w(s);const d=new FormData;d.append("session_id",x()),d.append("page",c),u(d)};return(!t||t.length==0)&&!j?e.jsxs(e.Fragment,{children:[p=="/dashboard/cancelled"?e.jsx(g,{}):"",e.jsx("h2",{className:"h-[450px] text-xl text-center custom400:text-2xl sm:text-3xl text-gray-700 grid place-items-center w-full px-3",children:"No order cancelled"})]}):e.jsxs(e.Fragment,{children:[p=="/dashboard/cancelled"?e.jsx(g,{}):"",e.jsxs("div",{className:"bg-white sm:shadow-[0_3px_10px_rgb(0,0,0,0.2)] sm:mx-2 rounded-lg py-2",children:[e.jsxs("div",{className:"hidden  sm:flex text-2xl font-semibold lg:text-3xl m-6 ",children:[e.jsx("h1",{children:" Cancelled  "}),t&&e.jsx("div",{className:"h-[40px] w-[50px] bg-violet-100 mx-2 rounded-lg grid place-items-center",children:e.jsx("span",{className:"  text-violet-600 text-[1.5rem]  ",children:(t==null?void 0:t.length)<10&&(t==null?void 0:t.length)>0?`0${t==null?void 0:t.length}`:t==null?void 0:t.length})})]}),e.jsx("div",{className:"  overflow-y-scroll h-[500px] my-8",id:"target_this",children:e.jsx(R,{dataLength:(t==null?void 0:t.length)||0,next:k,hasMore:N,loader:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Y,{})," ",e.jsx("p",{className:"text-xl text-red-400",children:"inventory"})," "]}),endMessage:e.jsx("p",{style:{textAlign:"center"},children:e.jsx("b",{children:"Yay! You have seen it all"})}),scrollableTarget:"target_this",children:j?e.jsx(T,{data:[1],data2:[1,2,3,4,5]}):e.jsxs("div",{children:[" ",t&&(t==null?void 0:t.map((s,d)=>{var o;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:" my-6 px-2 custom400:px-4 ",children:[e.jsxs("div",{className:" flex justify-between ",children:[e.jsxs("p",{className:"flex",children:[e.jsxs("b",{children:[" ",d+1,"."]}),"   ",e.jsxs("div",{className:"text-[#5a5a0a] sm:text-[#1687a7] ",children:[s.order_id&&e.jsxs("h4",{className:"sm:text-lg",children:["Order ID: ",s.order_id]}),s.order_time&&e.jsxs("span",{className:"hidden sm:block",children:["Order Date: ",m(s.order_time).toLocaleDateString()," ",m(s.order_time).toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[s.order_shipment_slip_id&&e.jsxs("p",{className:"text-[#1687a7]",children:["Shipment Id: ",s==null?void 0:s.order_shipment_slip_id]}),(s==null?void 0:s.order_delivery_type)&&e.jsxs("p",{className:"text-green-500",children:["Order Type: ",(s==null?void 0:s.order_delivery_type)==1?"Store Pickup":"Delivery"]})]})]},s.order_id),e.jsx("br",{}),(o=s.product_details)==null?void 0:o.map(r=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex sm:items-center sm:justify-between flex-col sm:flex-row my-4 ",children:[e.jsxs("div",{className:"flex sm:w-[60%]",children:[e.jsx("img",{src:r.main_image,alt:"ds",className:"max-w-[5rem] w-full "}),e.jsxs("div",{className:"ml-2",children:[r.product_title&&e.jsx("h4",{className:" text-wrap w-full my-2",children:r.product_title}),r.total_price_with_tax&&e.jsxs("h4",{className:"font-semibold text-2xl",children:["₹ ",r.total_price_with_tax]})]})]}),e.jsx("div",{className:"hidden sm:block font-semibold text-lg capitalize ",children:e.jsxs("p",{children:[r.colour&&e.jsxs("span",{children:[r.colour,","]}),r.size&&e.jsx("span",{children:r.size})]})}),e.jsx("div",{className:"hidden sm:block font-semibold text-lg sm:mr-10",children:(s==null?void 0:s.total_product_quantity)&&e.jsxs("p",{children:[s==null?void 0:s.total_product_quantity," "]})}),e.jsxs("div",{className:"text-[#73B7CA] flex space-x-4 justify-between my-4 text-sm sm:hidden ",children:[s.colour&&e.jsxs("div",{children:["Colour :",e.jsx("b",{className:"text-[#1687a7] capitalize ",children:s.colour})]}),s.size&&e.jsxs("div",{children:["Size:",e.jsx("b",{className:"text-[#1687a7] uppercase",children:s.size})]}),s.total_product_quantity&&e.jsxs("div",{children:["Qty.:",e.jsx("b",{className:"text-[#1687a7] ",children:s.total_product_quantity})]})]})]},r.order_product_detail_id)})),e.jsx("div",{className:"my-4 sm:hidden",children:e.jsxs(q,{sx:{background:" #D0E7ED",borderRadius:"20px"},children:[e.jsx(F,{expandIcon:e.jsx(M,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:e.jsx(f,{sx:{color:"#1687a7"},children:"Order Details"})}),e.jsx(Q,{children:e.jsxs(f,{className:" text-[#5a5a0a] ",style:{fontSize:"14px"},children:[s.order_time&&e.jsxs("span",{children:["Order Date :"," ",m(s.order_time).toLocaleDateString()]}),e.jsx("br",{}),s.order_shipment_slip_id&&e.jsxs("p",{className:"text-[#1687a7]",children:["Shipment Id: ",s==null?void 0:s.order_shipment_slip_id]}),e.jsx("br",{}),s.payment_type&&e.jsxs("span",{children:["Order Type: ",(s==null?void 0:s.order_delivery_type)==1?"Store Pickup":"Delivery"]})]})})]})}),e.jsx("hr",{}),e.jsx("br",{})]})})}))]})})})]}),e.jsx("br",{})]})};export{J as default};

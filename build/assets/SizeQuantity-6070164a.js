import{ad as m,ae as h,j as a,r as c,_ as R,b as E,h as I,i as $,k as w,s as _,t as k,e as P}from"./index-70997a97.js";import{B as v}from"./Box-7aca6db8.js";import"./createBox-e30dae9b.js";var d={},M=h;Object.defineProperty(d,"__esModule",{value:!0});var f=d.default=void 0,O=M(m()),A=a,L=(0,O.default)((0,A.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");f=d.default=L;var p={},V=h;Object.defineProperty(p,"__esModule",{value:!0});var y=p.default=void 0,F=V(m()),B=a,H=(0,F.default)((0,B.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");y=p.default=H;const T=c.lazy(()=>R(()=>import("./index-70997a97.js").then(r=>r.bC),["assets/index-70997a97.js","assets/index-52a015f8.css"])),G=r=>{const[i,u]=c.useState(null),x=E(),o=I(),g=$(),j=t=>P({url:"products/get_product_sizes",method:"post",data:t}),{mutate:b,isLoading:q}=w(j,{onSuccess:t=>{var e;u(((e=t==null?void 0:t.data)==null?void 0:e.prod_size_data)||[]),g.invalidateQueries("session_id")},onError:t=>{console.log(t)},retry:{maxAttempts:3,delay:t=>t*1e3}});c.useEffect(()=>{var t;if(!o)x("/login");else{const e=new FormData;e.append("session_id",o),e.append("product_id",(t=r==null?void 0:r.product)==null?void 0:t.product_id),b(e)}},[o]);const S=(t,e)=>{const n=e.target.value,s=[...i];s[t].quantity_available=parseInt(n,10),u(s)},D=t=>{const e=[...i];e[t].quantity_available=parseInt(e[t].quantity_available,10)+1,u(e)},z=t=>{const e=[...i];e[t].quantity_available=parseInt(e[t].quantity_available,10)-1,u(e)},C=async t=>{const e=[];for(const n of t){const s=new FormData;s.append("session_id",o),s.append("product_id",n.product_id),s.append("quantity",n.quantity_available),s.append("mrp",n.mrp),s.append("price",n.price);try{const l=await k.post("https://nearo.in/seller_app/index.php/seller/products/update_product_quantity_price",s);e.push(l.data)}catch(l){console.error(`Error posting data: ${l.message}`),e.push(null)}}return e};function N(t){return t.some(e=>e.success===1)}const Q=async t=>{t.preventDefault(),C(i).then(e=>{N(e)?(_.success("Product quantity updated successfully"),r.setQuantityOpen(!1)):_.error("Product quantity could not updated successfully")}).catch(e=>console.error("Error:",e))};return a.jsxs("div",{className:"text-black",children:[a.jsx("ul",{className:"mt-8",children:!i||q?a.jsx(a.Fragment,{children:a.jsx("div",{className:"grid place-items-center absolute bg-white z-20 top-0 right-0 bottom-0 left-0",children:a.jsx(c.Suspense,{fallback:a.jsx("div",{children:"Loading..."}),children:a.jsx(T,{})})})}):i.map((t,e)=>a.jsxs("li",{className:"flex justify-between items-center my-4",children:[a.jsx("p",{className:"text-sm custom400:text-lg c500:text-xl custom400:font-semibold",children:a.jsx("span",{className:"text-[#1687a7]",children:t.product_main_attribute_value_title})}),a.jsxs("div",{className:"flex space-x-2 c500:space-x-4 items-center",children:[a.jsx(v,{children:a.jsx(f,{onClick:()=>z(e)})}),a.jsx("input",{type:"number",onChange:n=>S(e,n),name:`quantity-${e}`,value:t.quantity_available,className:"w-14 h-8 focus:outline-none rounded-lg bg-[#d9d9d9] p-1 text-center"}),a.jsx(v,{children:a.jsx(y,{onClick:()=>D(e)})})]})]},e))}),a.jsx("button",{className:"w-full btn1 mt-4",onClick:t=>Q(t),children:"Save Changes"})]})},W=G;export{W as default};

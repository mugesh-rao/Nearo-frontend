import{G as T,K as D,r as p,H as M,j as e,af as q,a2 as y,ag as N,ah as v,ai as P,s as f,e as k}from"./index-70997a97.js";import{c as L,d as z,u as B,f as O}from"./index-cd29d591.js";import{c as V}from"./index.esm-267541a1.js";function A(x){return T({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M0 2v13h17v-13h-17zM8.494 9.817l-6.896-6.817h13.82l-6.924 6.817zM5.755 8.516l-4.755 4.682v-9.383l4.755 4.701zM6.466 9.219l2.026 2.003 1.996-1.966 4.8 4.744h-13.677l4.855-4.781zM11.201 8.555l4.799-4.725v9.467l-4.799-4.742z"}}]})(x)}const I={newPassword:"",confirmPassword:"",otp:Array.from({length:6},()=>"")},G=L({email:z().email("Invalid email address").required("Email is required")}),K=({setForgetOpen:x})=>{K.propTypes={setForgetOpen:D.func.isRequired};const[g,S]=p.useState(!1),[o,c]=p.useState({a:!1,b:!1}),C=a=>k({url:"/login/send_otp_forgot_password",method:"post",data:a}),[i,$]=p.useState(""),r=B({initialValues:{email:""},validationSchema:G,onSubmit:a=>{const t=new FormData;t.append("email",a==null?void 0:a.email),C(t).then(s=>{(s==null?void 0:s.data.success)==1?(S(!0),f.success(s==null?void 0:s.data.message)):$(s==null?void 0:s.data)})}}),F=a=>k({url:"/login/verify_and_change_password_forgot_password",method:"post",data:a}),{values:l,errors:n,touched:d,handleBlur:b,handleChange:w,handleSubmit:_,setFieldError:j,setFieldValue:h,setFieldTouched:m}=B({initialValues:I,validationSchema:O,onSubmit:a=>{const t=new FormData;t.append("email",r.values.email),t.append("otp",a.otp.join("")),t.append("new_password",a==null?void 0:a.newPassword),F(t).then(s=>{(s==null?void 0:s.data.success)==1?(f.success(s==null?void 0:s.data.message),x(!1)):f.error(s==null?void 0:s.data.message)})}}),E=a=>{a<l.otp.length-1&&l.otp[a]!==""&&(m(`otp[${a}]`,!0),j(`otp[${a}]`,void 0),h(`otp[${a+1}]`,""),u.current[a+1].current.focus())},u=p.useRef(Array.from({length:l.otp.length},(a,t)=>M.createRef())),R=(a,t)=>{const s=a.target.value.replace(/\D/g,"");h(`otp[${t}]`,s),m(`otp[${t}]`,!0),s===""&&t>0?(j(`otp[${t}]`,void 0),u.current[t-1].current.focus()):t<l.otp.length-1&&s!==""?(m(`otp[${t}]`,!0),u.current[t+1].current.focus()):t===l.otp.length-1&&s===""&&(h(`otp[${t}]`,""),m(`otp[${t}]`,!0))};return e.jsxs(e.Fragment,{children:[g==!1&&e.jsxs("div",{children:[e.jsx(q,{className:" rounded-lg text-5xl border border-cyan-300 p-2 text-cyan-600"}),e.jsxs("p",{className:"my-4 text-sm text-[#5a5a0a]",children:["No Worries we","'","ll send you setup instructions."," "]}),e.jsxs("form",{action:"",className:"my-5 ",onSubmit:r.handleSubmit,children:[e.jsx("input",{type:"email",id:"email",name:"email",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.email,placeholder:"Enter Your Email ID",className:"w-full p-2 border border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500 ",required:!0}),r.touched.email&&r.errors.email?e.jsx("div",{style:{color:"red"},children:r.errors.email}):i&&e.jsxs("p",{className:"text-red-500 text-sm mt-1",children:[i==null?void 0:i.message," "]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"btn1 text-white font-semibold py-[10px] w-full",type:"submit",disabled:!r.isValid,children:"Send OTP"})]}),e.jsxs(y,{to:"/login",children:[" ",e.jsxs("p",{className:"text-lg font-semibold flex items-center justify-center",children:[" ",e.jsx(N,{className:"text-xl font-semibold"}),"  Back To Log in"]})," "]})]}),g&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(A,{className:" rounded-lg text-5xl border border-cyan-300 p-2 text-cyan-600"}),e.jsxs("div",{className:"custom400:border border-black custom400:p-4 max-w-max mx-auto my-2 mt-4",children:[e.jsx("div",{className:"grid gap-2 c500:grid-cols-6 custom400:grid-cols-5 grid-cols-3",children:l.otp.map((a,t)=>e.jsx("input",{type:"text",inputMode:"numeric",maxLength:"1",className:`w-12 h-12 text-4xl border border-cyan-500 text-cyan-700 text-center focus:outline-none focus:ring-1 focus:ring-cyan-500 ${n.otp&&d.otp&&n.otp[t]?"border-red-500":""}`,value:a,onChange:s=>R(s,t),onKeyDown:s=>s.key>="0"&&s.key<="9"&&E(t),ref:u.current[t],required:!0},t))}),n.otp&&d.otp?e.jsx("div",{style:{color:"red",marginTop:"0.5rem"},children:n.otp}):null]})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx(V,{className:" rounded-lg text-5xl border border-cyan-300 p-2 text-cyan-600"}),e.jsx("h2",{className:"text-xl sm:text-3xl font-semibold my-2 text-black",children:"Set new password"}),e.jsx("p",{className:"text-sm",children:"Must be at least 8 charectors."}),e.jsxs("p",{className:"text-[1rem] font-semibold mt-5",children:["New password",e.jsx("sup",{children:"*"})," "]}),e.jsxs("div",{className:"flex items-center ",style:{borderBottom:"1px solid gray"},children:[e.jsx("input",{type:o.a?"text":"password",name:"newPassword",onChange:w,onBlur:b,value:l.newPassword,className:" p-2 focus:outline-none w-full "}),o.a?e.jsx(v,{onClick:()=>c({...o,a:!o.a}),className:"text-xl"}):e.jsx(P,{onClick:()=>c({...o,a:!o.a}),className:"text-xl"})]}),n.newPassword&&d.newPassword?e.jsx("h5",{style:{color:"red"},className:"text-sm",children:n.newPassword}):"",e.jsxs("p",{className:"text-[1rem] font-semibold mt-5",children:["Confirm password",e.jsx("sup",{children:"*"})," "]}),e.jsxs("div",{className:"flex   items-center focus:bg-cyan-100",style:{borderBottom:"1px solid gray"},children:[e.jsx("input",{type:o.b?"text":"password",name:"confirmPassword",onChange:w,onBlur:b,value:l.confirmPassword,className:" p-2 focus:outline-none w-full "}),o.b?e.jsx(v,{onClick:()=>c({...o,b:!o.b}),className:"text-xl"}):e.jsx(P,{onClick:()=>c({...o,b:!o.b}),className:"text-xl"})]}),n.confirmPassword&&d.confirmPassword?e.jsx("h5",{style:{color:"red"},className:"my-3 text-sm",children:n.confirmPassword}):"",e.jsx("button",{onClick:_,className:"w-full text-white btn1   font-semibold mx-auto  my-4",children:"Reset Password"})]}),e.jsxs(y,{to:"/login",children:[" ",e.jsxs("p",{className:"text-lg font-semibold flex items-center justify-center mb-8",children:[" ",e.jsx(N,{className:"text-xl font-semibold"}),"  Back To Log in"]})," "]})]})]})};export{K as default};

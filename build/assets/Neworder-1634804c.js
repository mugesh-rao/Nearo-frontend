import{I as H,aw as ae,aQ as $,j as s,J as ie,aa as ce,aq as de,aj as z,W as k,ak as le,r as l,an as me,V as pe,X as xe,ao as he,ad as ue,ae as _e,G as fe,_ as je,v as ge,w as ye,b as be,h as Ne,i as we,k as N,D as R,y as F,T as O,s as p,e as w}from"./index-70997a97.js";import{O as ke,A as Ce,a as Se,d as Ie,b as ze}from"./OrderSkeleton-269513a0.js";import{I as Le}from"./index.es-9acb4e93.js";import{L as q}from"./LazyLoadImage-edf60663.js";import{c as De}from"./createBox-e30dae9b.js";import{S as Pe}from"./SwitchBase-7fe961a1.js";import"./Skeleton-1722e138.js";import"./useFormControl-0c2f0a6a.js";const Ae=H("MuiBox",["root"]),Fe=Ae,Me=De({defaultClassName:Fe.root,generateClassName:ae.generate}),$e=Me,Ee=$(s.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Be=$(s.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Re=$(s.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Oe(r){return ie("MuiCheckbox",r)}const qe=H("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),M=qe,Te=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Qe=r=>{const{classes:n,indeterminate:h,color:_,size:f}=r,m={root:["root",h&&"indeterminate",`color${z(_)}`,`size${z(f)}`]},g=he(m,Oe,n);return k({},n,g)},He=ce(Pe,{shouldForwardProp:r=>de(r)||r==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(r,n)=>{const{ownerState:h}=r;return[n.root,h.indeterminate&&n.indeterminate,n[`size${z(h.size)}`],h.color!=="default"&&n[`color${z(h.color)}`]]}})(({theme:r,ownerState:n})=>k({color:(r.vars||r).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:r.vars?`rgba(${n.color==="default"?r.vars.palette.action.activeChannel:r.vars.palette[n.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:le(n.color==="default"?r.palette.action.active:r.palette[n.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},n.color!=="default"&&{[`&.${M.checked}, &.${M.indeterminate}`]:{color:(r.vars||r).palette[n.color].main},[`&.${M.disabled}`]:{color:(r.vars||r).palette.action.disabled}})),Ve=s.jsx(Be,{}),Ge=s.jsx(Ee,{}),Ue=s.jsx(Re,{}),We=l.forwardRef(function(n,h){var _,f;const m=me({props:n,name:"MuiCheckbox"}),{checkedIcon:g=Ve,color:L="primary",icon:C=Ge,indeterminate:j=!1,indeterminateIcon:S=Ue,inputProps:D,size:x="medium",className:P}=m,A=pe(m,Te),y=j?S:C,b=j?S:g,o=k({},m,{color:L,indeterminate:j,size:x}),I=Qe(o);return s.jsx(He,k({type:"checkbox",inputProps:k({"data-indeterminate":j},D),icon:l.cloneElement(y,{fontSize:(_=y.props.fontSize)!=null?_:x}),checkedIcon:l.cloneElement(b,{fontSize:(f=b.props.fontSize)!=null?f:x}),ownerState:o,ref:h,className:xe(I.root,P)},A,{classes:I}))}),Ye=We;var E={},Je=_e;Object.defineProperty(E,"__esModule",{value:!0});var V=E.default=void 0,Xe=Je(ue()),T=s,Ze=(0,Xe.default)([(0,T.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z"},"0"),(0,T.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"LocationOnOutlined");V=E.default=Ze;function Ke(r){return fe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"}}]})(r)}const Q=l.lazy(()=>je(()=>import("./index-70997a97.js").then(r=>r.bC),["assets/index-70997a97.js","assets/index-52a015f8.css"])),cs=()=>{const{activeLinkParam:r}=ge(),n=ye(),h=be(),[_,f]=l.useState(r),m=Ne(),[g,L]=l.useState([]),[C,j]=l.useState(0),[S,D]=l.useState(!0),x=we(),P=(e,i)=>{const{value:a,checked:c}=e.target,d=[...g];c?d[i]=parseInt(a):d[i]=null;const t=d.filter(u=>u!==null);L(t)};l.useEffect(()=>{f(r)},[r]),l.useEffect(()=>{f(n.pathname)},[n]);const A=e=>w({url:"/orders/get_all_order_list",method:"post",data:e}),{mutate:y,isLoading:b}=N(A,{onSuccess:e=>{const i=new Set(o.map(c=>c.order_id)),a=e==null?void 0:e.data.data.filter(c=>!i.has(c.order_id));I(c=>{const d=new Set(a.map(u=>u.order_id));return[...c.filter(u=>!d.has(u.order_id)),...a]}),a.length===0&&D(!1),x.invalidateQueries("low_stocks_data")},onError:e=>{console.log(e)},retry:{maxAttempts:3,delay:e=>e*1e3}}),[o,I]=l.useState(l.useMemo(()=>{const e=x.getQueryData("session_id");return e?e.data:[]},[x]));l.useEffect(()=>{if(!m)h("/login");else{j(i=>i+1);const e=new FormData;return e.append("session_id",m),e.append("page",C),e.append("payment_type","All"),e.append("recent_orders_first",1),e.append("order_delivery_type","All"),e.append("only_new_orders",1),y(e),()=>{}}},[]);const G=()=>{j(i=>i+1);const e=new FormData;e.append("session_id",m),e.append("page",C),e.append("payment_type","All"),e.append("recent_orders_first",1),e.append("order_delivery_type","All"),e.append("only_new_orders",1),y(e)},U=e=>w({url:"/orders/confirm_order_product_status",method:"post",data:e}),{mutate:W,isStatusLoading:Y}=N(U,{onSuccess:e=>{e.data.success?(p.success(e.data.message),window.location.reload()):p.error(e.data.message),x.invalidateQueries("low_stocks_data")},onError:e=>{p.error(e.message)}}),B=(e,i)=>{const a=new FormData;a.append("session_id",m),a.append("order_product_detail_id",e==null?void 0:e.order_product_detail_id),a.append("seller_status",i),W(a)},J=e=>w({url:"orders/get_bills",method:"post",data:e}),{mutate:ve,isLoading:X}=N(J,{onSuccess:e=>{e.data.success?p.success(e.data.message):p.error(e.data.message),x.invalidateQueries("order_delivered")},onError:e=>{p.error(e.data.message)},retry:{maxAttempts:3,delay:e=>e*1e3}}),Z=e=>w({url:"orders/create_selected_products_shipment",method:"post",data:e}),{mutate:K,isLoading:v}=N(Z,{onSuccess:e=>{e.data.success?p.success(e.data.message):p.error(e.data.message),x.invalidateQueries("order_delivered")},onError:e=>{p.error(e.data.message)},retry:{maxAttempts:3,delay:e=>e*1e3}}),ee=(e,i)=>{var a=i.filter(t=>t!==void 0);console.log(a);const c=new FormData;c.append("session_id",m),c.append("order_id",e),a=a[0];for(var d=0;d<a.length;d++)c.append(`order_product_detail_ids[${d}]`,a[d]);K(c)},se=e=>w({url:"orders/mark_ready_for_ship",method:"post",data:e}),{mutate:te,isLoading:re}=N(se,{onSuccess:e=>{e.data.success?p.success(e.data.message):p.error(e.data.message),x.invalidateQueries("order_delivered")},onError:e=>{p.error(e)},retry:{maxAttempts:3,delay:e=>e*1e3}}),oe=e=>{const i=new FormData;i.append("session_id",m),i.append("order_id",e),te(i)};return v||X||re||Y?s.jsx("div",{className:"h-screen w-full grid place-items-center fixed z-20 top-0 right-0 bottom-0 left-0 bg-white",children:s.jsx(Q,{})}):(!o||o.length==0)&&!b?s.jsxs(s.Fragment,{children:[_=="/dashboard/neworders"?s.jsx(R,{}):"",s.jsx("h2",{className:"h-[450px] text-xl text-center custom400:text-2xl sm:text-3xl text-gray-700 grid place-items-center w-full px-3",children:"No new order received yet!"})]}):s.jsxs(s.Fragment,{children:[_=="/dashboard/neworders"?s.jsx(R,{}):"",s.jsxs("div",{className:" bg-white sm:shadow-[0_3px_10px_rgb(0,0,0,0.2)] sm:mx-2 rounded-lg py-2 ",children:[s.jsxs("div",{className:"hidden  sm:flex text-2xl font-semibold lg:text-3xl m-6 ",children:[s.jsx("h1",{children:" New Orders  "}),o&&s.jsx("div",{className:"h-[40px] w-[50px] bg-[#FFF7F0] mx-2 rounded-lg grid place-items-center",children:s.jsx("span",{className:"text-[#F07614] text-[1.5rem]",children:(o==null?void 0:o.length)<10&&(o==null?void 0:o.length)>0?`0${o==null?void 0:o.length}`:o==null?void 0:o.length})})]}),s.jsx("div",{className:"overflow-y-scroll h-[500px] my-8",id:"target_this",children:s.jsx(Le,{dataLength:(o==null?void 0:o.length)||0,next:G,hasMore:S,loader:s.jsxs("div",{className:"flex items-center justify-center my-10 w-full h-[100px]",children:[s.jsx(Q,{})," "]}),endMessage:s.jsx("p",{style:{textAlign:"center"},children:s.jsx("b",{children:"Yay! You have seen it all "})}),scrollableTarget:"target_this",children:b?s.jsx(ke,{data:[1],data2:[1,2,3,4,5]}):s.jsx("div",{children:o==null?void 0:o.map((e,i)=>{var a,c,d;return s.jsxs("div",{className:" my-6 px-2 custom400:px-4",children:[s.jsxs("div",{className:" flex justify-between ",children:[s.jsxs("p",{className:"flex",children:[s.jsxs("b",{children:[" ",i+1," ."]}),"   ",s.jsxs("div",{className:"text-[#5a5a0a] sm:text-[#1687a7]",children:[e.order_id&&s.jsxs("h4",{className:"sm:text-lg",children:["Order ID: ",e.order_id]}),e.order_time&&s.jsxs("span",{className:"hidden sm:block",children:["Order Date:"," ",F(e.order_time).toLocaleDateString()," ",F(e.order_time).toLocaleTimeString()]})]})]}),s.jsxs("div",{className:"hidden sm:block   ",children:[e.location&&s.jsxs("span",{className:"flex items-center justify-end text-[#1687a7]",children:[s.jsx(V,{}),s.jsxs($e,{sx:{paddingTop:"5px"},children:[" ",e.location," "]})]}),(e==null?void 0:e.order_delivery_type)&&s.jsxs("p",{className:"text-green-500",children:["Order Type:"," ",(e==null?void 0:e.order_delivery_type)==1?"Store Pickup":"Delivery"]})]})]}),s.jsx("br",{}),e.order_seller_status==="2"?s.jsxs(s.Fragment,{children:[(a=e==null?void 0:e.product_details)==null?void 0:a.filter(t=>t.seller_status==="1"&&(t.order_product_status==="1"||t.order_product_status==="2")).map((t,u)=>s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-center justify-between flex-row my-4",children:[s.jsxs("div",{className:"flex sm:w-[60%]",children:[s.jsx(q,{src:t.main_image,alt:t.main_image,className:"max-w-[5rem] w-full "}),s.jsxs("div",{className:"ml-2",children:[t.product_title&&s.jsx("h4",{className:" text-wrap w-full my-2",children:t.product_title}),t.total_price_with_tax&&s.jsxs("h4",{className:"font-bold text-2xl",children:["₹"," ",t.total_price_with_tax]})]})]}),s.jsx("div",{className:"hidden sm:block font-semibold text-lg capitalize ",children:s.jsxs("p",{children:[t==null?void 0:t.colour,", ",t==null?void 0:t.size]})}),s.jsx("div",{className:"text-[#73B7CA] flex space-x-4 justify-between items-center my-4 text-sm sm:justify-center ",children:s.jsx(Ye,{name:"order_product_detail_id",value:t.order_product_detail_id,onChange:ne=>{P(ne,u)},inputProps:{"aria-label":"controlled"},sx:{color:"#1687a7","&.Mui-checked":{color:"#1687a7"},"& .MuiSvgIcon-root":{fontSize:28}}})})]},u)})),s.jsxs("div",{className:"mb-8 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4  justify-center sm:justify-end  w-full",children:[s.jsx("button",{className:"btn1 p-3 px-10 w-full md:w-fit",type:"button",onClick:()=>ee(e==null?void 0:e.order_id,[g]),children:"Create shipment"}),s.jsxs("button",{type:"button",className:"bg-[#A2CFDC] w-full md:w-fit flex items-center justify-center p-3 px-8 rounded-lg text-[#1687a7]",onClick:()=>oe(e==null?void 0:e.order_id),children:["Ready for Ship",s.jsx(Ke,{className:"ml-4"})]})]})]}):s.jsx(s.Fragment,{children:(d=(c=e==null?void 0:e.product_details)==null?void 0:c.filter(t=>t.seller_status!=="2"))==null?void 0:d.map(t=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex sm:items-center sm:justify-between flex-col sm:flex-row ",children:[s.jsxs("div",{className:"flex sm:w-[60%]",children:[s.jsx(q,{src:t.main_image,alt:t.main_image,className:"w-[80px] h-[100px] object-contain aspect-[3/2] "}),s.jsxs("div",{className:"ml-2",children:[t.product_title&&s.jsx("h4",{className:"text-wrap w-full my-2 text-sm c500:text-[1rem]",children:t.product_title}),t.total_price_with_tax&&s.jsxs("h4",{className:"font-semibold text-2xl",children:["₹"," ",t.total_price_with_tax," "]})]})]}),s.jsx("div",{className:"hidden sm:block font-semibold text-lg capitalize ",children:s.jsxs("p",{children:[(t==null?void 0:t.colour)&&s.jsxs("span",{children:[t.colour,", "]}),(t==null?void 0:t.size)&&s.jsx("span",{children:t.size})]})}),s.jsx("div",{className:"hidden sm:block font-semibold text-lg",children:(e==null?void 0:e.total_product_quantity)&&s.jsxs("p",{children:[e==null?void 0:e.total_product_quantity," "]})}),s.jsxs("div",{className:"text-[#73B7CA] flex space-x-4 justify-between my-4 text-sm sm:hidden ",children:[t.colour&&s.jsxs("div",{children:["Color :",s.jsx("b",{className:"text-[#1687a7] capitalize ",children:t.colour})]}),t.size&&s.jsxs("div",{children:["Size:"," ",s.jsx("b",{className:"text-[#1687a7] uppercase",children:t.size})]}),e.total_product_quantity&&s.jsxs("div",{children:["Qty. :",s.jsx("b",{className:"text-[#1687a7] ",children:e.total_product_quantity})]})]})]},t==null?void 0:t.order_id),s.jsxs("div",{className:"flex custom300:space-x-2 sm:space-x-4 justify-between custom450:justify-start  my-3 custom300:flex-row flex-col space-y-4 custom300:space-y-0 ",children:[t.seller_status==="1"?s.jsx("button",{className:"py-2 px-6 rounded-lg  bg-gray-400 text-white border-[#1587a7]  ",disabled:!0,type:"button",children:"Available"}):s.jsx("button",{className:"py-[12px] px-7 custom400:px-10 rounded-xl text-white bg-green-500 border hover:bg-transparent hover:text-green-500 hover:border-green-500 duration-500",onClick:()=>B(t,"1"),type:"button",children:"Available"}),s.jsx("button",{className:"py-[12px] px-6 custom400:px-10 rounded-xl text-white bg-red-500 border hover:bg-transparent hover:text-red-500 hover:border-red-500 duration-500",onClick:()=>B(t,"2"),type:"button",children:"Not Available"})]})]}))}),s.jsx("div",{className:"my-2 sm:hidden",children:s.jsxs(Ce,{sx:{background:" #D0E7ED",borderRadius:"20px"},children:[s.jsx(Se,{expandIcon:s.jsx(Ie,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:s.jsx(O,{sx:{color:"#1687a7"},children:"Order Details"})}),s.jsx(ze,{children:s.jsxs(O,{className:" text-[#5a5a0a] ",style:{fontSize:"14px"},children:[e.order_time&&s.jsxs("span",{children:["Order Date :"," ",F(e.order_time).toLocaleDateString()]}),s.jsx("br",{}),e.location&&s.jsxs("span",{children:["Order Location : ",e.location]}),s.jsx("br",{}),(e==null?void 0:e.order_delivery_type)&&s.jsxs("span",{children:["Order Type:"," ",(e==null?void 0:e.order_delivery_type)==1?"Store Pickup":"Delivery"]})]})})]})}),s.jsx("div",{className:"h-[1px] bg-gray-300 "})]},e==null?void 0:e.order_id)})})})})]}),s.jsx("br",{})]})};export{cs as default};

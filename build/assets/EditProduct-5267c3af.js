import{ad as V,ae as D,j as t,i as ee,h as se,b as te,r as o,k as le,L as oe,ax as L,C as re,e as ie}from"./index-70997a97.js";import ce from"./SizeQuantity-6070164a.js";import{R as ne}from"./Rating-f2c8c2d6.js";import"./Box-7aca6db8.js";import"./createBox-e30dae9b.js";var h={},ae=D;Object.defineProperty(h,"__esModule",{value:!0});var z=h.default=void 0,de=ae(V()),me=t,ue=(0,de.default)((0,me.jsx)("path",{d:"M18.41 5.8 17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74 2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66 1.21 1.21L6.21 18zM11 20l4-4h6v4H11z"}),"DriveFileRenameOutline");z=h.default=ue;const ge=g=>{var v,N,b,y,S,C,k,P,I,R,E;const n=ee(),a=se(),w=te(),[d,$]=o.useState(null),[i,F]=o.useState([]),[l,H]=o.useState([]),[m,A]=o.useState([]),[u,T]=o.useState([]),[j,x]=o.useState(!1),B=e=>ie({url:"products/get_product",method:"post",data:e}),{mutate:G,isLoading:J}=le(B,{onSuccess:e=>{var r,M,Q,q,O;K(e==null?void 0:e.data),A((r=e==null?void 0:e.data)==null?void 0:r.prod_size_data),T((M=e==null?void 0:e.data)==null?void 0:M.p_attr_desc_data),F((q=(Q=e==null?void 0:e.data)==null?void 0:Q.product_data)==null?void 0:q.images.split(",")),H((O=e==null?void 0:e.data)==null?void 0:O.p_variation_data),n.invalidateQueries("add_products")},onError:e=>{console.log(e)},retry:{maxAttempts:3,delay:e=>e*1e3}}),[s,K]=o.useState(o.useMemo(()=>{const e=n.getQueryData("add_products");return e?e.data:null},[n])),[c,p]=o.useState(g.product.product_id);o.useEffect(()=>{if(!a)w("/login");else{const e=new FormData;e.append("session_id",a),e.append("product_id",c),G(e)}},[g,a,c]);const U=e=>{w(`/dashboard/add_product/edit/${e}`)},W=e=>{x(!0),p(e)},[_,X]=o.useState(null),[f,Y]=o.useState(4),Z=()=>{Y(l.length)};return J?t.jsx("h2",{className:"w-full h-full grid place-items-center bg-white ",children:t.jsx(oe,{})}):t.jsxs("div",{className:"w-full h-auto flex flex-col md:flex-row md:space-x-3 ",children:[t.jsxs("div",{className:"product-image w-full md:w-[34%] flex flex-col custom400:flex-row-reverse md:flex-col  md:items-start justify-center gap-x-0 md:block ",children:[t.jsx("img",{src:d||(i&&i?i[0]:""),alt:"main img",className:"aspect-[3/2] object-contain w-full  custom400:w-[240px] sm:w-[340px] md:w-full min-h-[350px] rounded-lg input-border cursor-pointer duration-500"}),t.jsx("div",{className:"flex flex-row custom400:flex-col md:flex-row custom400:w-fit overflow-x-scroll custom400:overflow-y-scroll md:overflow-x-scroll whitespace-nowrap gap-1 my-2 ",children:i==null?void 0:i.map((e,r)=>t.jsx("img",{src:e,alt:"imagex",onClick:()=>{$(e)},className:`h-[5rem] w-[64px] object-contain ${d===e?"border-2":"border"} border-[#1687a7] duration-500`},r+1))})]}),t.jsxs("div",{className:"product-about w-full md:w-[64%] mt-2 ",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:" bg-red-100 text-[12px] custom400:text-sm px-4 py-2 rounded-xl text-gray-600",children:[(v=s==null?void 0:s.product_data)==null?void 0:v.quantity_available," Left in Stock"]})," "]}),t.jsx("h4",{className:"my-2 text-[1rem] sm:text-xl text-black",children:(N=s==null?void 0:s.product_data)==null?void 0:N.product_title}),t.jsxs("div",{className:"flex items-center ",children:[t.jsx(ne,{name:"half-rating",value:(b=s==null?void 0:s.product_data)==null?void 0:b.avg_review_stars,precision:.5,size:"large",readOnly:!0,sx:{fontSize:"25px"}}),"  ❲",t.jsxs("p",{children:[`${(y=s==null?void 0:s.product_data)!=null&&y.num_total_reviews?(S=s==null?void 0:s.product_data)==null?void 0:S.num_total_reviews:"0"}`,"❳"]})]}),t.jsxs("div",{className:"flex items-center my-2 space-x-3",children:[t.jsxs("h2",{className:"text-2xl custom400:text-3xl sm:text-4xl font-semibold text-[#1687a7] ",children:["₹ ",(C=s==null?void 0:s.product_data)==null?void 0:C.price]}),t.jsxs("p",{className:"text-sm sm:text-[1.1rem] text-[#5a5a0a] line-through  ",children:["₹ ",(k=s==null?void 0:s.product_data)==null?void 0:k.mrp]}),t.jsxs("p",{className:" text-lg sm:text-xl text-green-600",children:[" ",(P=s==null?void 0:s.product_data)==null?void 0:P.discount_percent,"% off"]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("p",{className:"text-[#5a5a0a]",children:" Color : "}),"    ",t.jsx("h5",{className:"text-lg font-semibold",children:_&&_?_:(I=s==null?void 0:s.product_data)!=null&&I.product_variation_attribute_value_title&&((R=s==null?void 0:s.product_data)!=null&&R.product_variation_attribute_value_title)?(E=s==null?void 0:s.product_data)==null?void 0:E.product_variation_attribute_value_title:""})]}),t.jsxs("div",{className:`flex items-end gap-1 c500:gap-2 w-[95%] custom450:w-[80%] ${(l==null?void 0:l.length)>4&&f<(l==null?void 0:l.length)?"flex-wrap":(l==null?void 0:l.length)>4?"overflow-x-scroll whitespace-nowrap":""} `,children:[l==null?void 0:l.slice(0,f).map((e,r)=>t.jsx("img",{src:e.main_image,alt:"d",className:`${L(c===e.product_id?"border-2 border-[#1687a7] ":"")} rounded-lg h-16 w-[60px] c500:w-[70px] cursor-pointer`,onClick:()=>[p(e.product_id),X(e.colour)]},r+1)),(l==null?void 0:l.length)>4&&f<(l==null?void 0:l.length)&&t.jsx("button",{onClick:Z,className:" text-sm font-semibold",children:"More..."})]}),t.jsxs("div",{className:"flex items-start my-2",children:[t.jsx("p",{className:"text-[#5a5a0a]",children:"Size:  "}),t.jsx("div",{className:"text-sm sm:text-lg tracking-widest text-black flex flex-wrap cursor-pointer gap-4 w-[90%] capitalize",children:m==null?void 0:m.map((e,r)=>t.jsx("h1",{className:L((e==null?void 0:e.product_id)===c?"underline font-semibold":""),onClick:()=>p(e.product_id),children:e.product_main_attribute_value_title},r))})," "]}),t.jsx("ul",{className:"text-sm capitalize",children:u==null?void 0:u.slice(0,4).map((e,r)=>t.jsxs("li",{children:[e==null?void 0:e.name," ",":"," ",e==null?void 0:e.value]},r))}),t.jsxs("div",{className:"flex justify-between mt-3 relative bottom-0 ",children:[t.jsx("button",{className:"w-[72%] custom400:w-[80%] bg-[#1687a7] text-white rounded-lg py-1 custom400:py-2",onClick:e=>[W(s==null?void 0:s.product_data),e.stopPropagation()],children:"Edit Quantity"}),t.jsx("button",{className:"w-[24%] custom400:w-[18%] input-border py-1 custom400:py-2 text-center",onClick:()=>{var e;return U((e=s==null?void 0:s.product_data)==null?void 0:e.product_id)},children:t.jsx(z,{sx:{color:"#1687a7"}})})]})]}),j&&t.jsx(re,{open:j,onNo:()=>x(!1),size:"small",title:"Edit Quantities",children:t.jsx(ce,{product:c,setQuantityOpen:x})})]})};export{ge as default};

import{r as n,_ as Z,i as Ee,h as ve,b as Ae,k as v,j as e,R as Oe,s as j,e as A,t as Le,v as Ue,m as $e,C as He}from"./index-70997a97.js";import{u as Re,F as Be,T as qe}from"./index.esm-a1a2ea8f.js";import{b as Ve}from"./index.esm-267541a1.js";import{u as Qe}from"./index-cd29d591.js";import{F as W,S as J,M as I}from"./Select-569c6f7c.js";import"./formControlState-a1fb9590.js";import"./useFormControl-0c2f0a6a.js";import"./List-32c2f291.js";import"./dividerClasses-1ca545a7.js";const We=n.lazy(()=>Z(()=>import("./AttributeForAddVariant-fe0f1ab8.js"),["assets/AttributeForAddVariant-fe0f1ab8.js","assets/index-70997a97.js","assets/index-52a015f8.css"])),Je=n.lazy(()=>Z(()=>import("./Tables-a9c8b998.js"),["assets/Tables-a9c8b998.js","assets/index-70997a97.js","assets/index-52a015f8.css","assets/Button-da6a835c.js"])),Ze=n.lazy(()=>Z(()=>import("./MainCategoryForAddVariant-9793a604.js"),["assets/MainCategoryForAddVariant-9793a604.js","assets/index-70997a97.js","assets/index-52a015f8.css"])),Ke=x=>{var ee;const D=Ee(),_=ve(),[M,U]=n.useState(!1),[L,P]=n.useState([]),[V,$]=n.useState(""),[R,B]=n.useState([]),[Q,k]=n.useState([]);Ae();const[E,y]=n.useState([]),[te,Ne]=n.useState({product_title:"",hsn_code:"",product_market_price:"",product_discount:"",gst_category_id:"",low_stock:"",return_period_time:"",product_weight:"",country_origin:"",manufactured_by:"",product_desc:""}),re=r=>A({url:"/products/add_product",method:"post",data:r}),{mutate:se,isLoading:oe}=v(re,{onSuccess:r=>{var o,i,u,f;((o=r==null?void 0:r.data)==null?void 0:o.success)===1?(j.success((i=r==null?void 0:r.data)==null?void 0:i.message),g(r==null?void 0:r.data),_e((u=r==null?void 0:r.data)==null?void 0:u.product_id)):j.error((f=r==null?void 0:r.data)==null?void 0:f.message),D.invalidateQueries("add_products")},onError:r=>{j.error(r)},retry:{maxAttempts:3,delay:r=>r*1e3}}),[we,g]=n.useState(n.useMemo(()=>{const r=D.getQueryData("add product");return r?r.data:null},[D]));let{values:l,errors:m,touched:C,handleBlur:z,handleChange:N,handleSubmit:Se,setValues:ne,setFieldValue:ae}=Qe({initialValues:te,onSubmit:r=>{const o=new FormData;o.append("session_id",_),o.append("product_title",r==null?void 0:r.product_title),o.append("product_category1_id",d==null?void 0:d.product_category1_id),o.append("product_category2_id",d==null?void 0:d.product_category2_id),o.append("product_category3_id",d==null?void 0:d.product_category3_id),o.append("product_category4_id",d==null?void 0:d.product_category4_id),o.append("hsn_code",r==null?void 0:r.hsn_code),o.append("gst_category_id",r==null?void 0:r.gst_category_id),o.append("product_low_quantity_stock",r==null?void 0:r.product_low_quantity_stock),o.append("return_period_time",r==null?void 0:r.return_period_time),o.append("product_weight",r==null?void 0:r.product_weight),o.append("country_origin",r==null?void 0:r.country_origin),o.append("manufactured_by",r==null?void 0:r.manufactured_by),o.append("product_desc",r==null?void 0:r.product_desc),R==null||R.forEach((f,q)=>{o.append(`product_sizes[${q}][main_attribute_value_id]`,f==null?void 0:f.main_attribute_value_id),o.append(`product_sizes[${q}][mrp]`,f.price),o.append(`product_sizes[${q}][price]`,f.price),o.append(`product_sizes[${q}][quantity]`,f.quantity)});for(var i=0;i<Q.length;i++)for(var u=0;u<Q[i].length;u++)o.append("product_attributes["+i+"]["+u+"]",Q[i][u]);o.append("is_variation","1"),o.append("product_id",x.data.product_data.product_id),o.append("variation_attribute_value_id",Q[0][1]),se(o)}});const K=n.useCallback((r,o)=>{const{value:i,checked:u}=r.target;u&&l.discount_percent?(P([...L,i]),B([...R,{name:i,isEditing:!1,main_attribute_value_id:o,mrp:l.mrp,discount:l.discount_percent,quantity:0,price:l.mrp-l.mrp*l.discount_percent/100}]),$(V+i+", ")):(B(R.filter(f=>f.name!==i)),P(L.filter(f=>f!==i)),$(V.replace(i+", ","")))},[V,L,R,l==null?void 0:l.discount_percent,l==null?void 0:l.mrp]),a=n.useCallback(r=>{r.preventDefault(),U(!M),L.length==0&&K(r,49)},[M,K,L]),p=n.useCallback(r=>{r.preventDefault(),P([]),$(""),B([]),U(!1)},[]),w=()=>{U(!1)};n.useEffect(()=>{fetch("https://restcountries.com/v3.1/all").then(r=>r.json()).then(r=>y(r.map(o=>o.name.common)))},[]);const S=()=>Le.get("https://nearo.in/seller_app/index.php/seller/datas/get_gst_categories"),{isLoading:F,data:T,isError:X,error:le}=Re("gstData",S),Y=v(r=>A({url:"/datas/get_product_sizes",method:"post",data:r}),{onSuccess:r=>{var o;ke((o=r==null?void 0:r.data)==null?void 0:o.data),D.invalidateQueries("product_Size")},onError:r=>{console.log(r)},retry:{maxAttempts:3,delay:r=>r*1e3}}),[G,ke]=n.useState(n.useMemo(()=>{const r=D.getQueryData("product_Size");return r?r.data:null},[D])),[ce,ie]=n.useState(!0),[b,O]=n.useState([]),de=r=>{const i=Array.from(r.target.files).filter(u=>u.type.startsWith("image/"));O([...b,...i])},pe=(r,o)=>{const i=r.target.files[0];if(i&&i.type.startsWith("image/")){const u=[...b];u[o]=i,O(u)}},ze=r=>{const o=b.filter((i,u)=>u!==r);O(o)},Fe=r=>A({url:"/products/update_product_main_image",method:"post",data:r}),{mutate:Ie,isLoading:ue}=v(Fe,{onSuccess:r=>{console.log(r==null?void 0:r.data),D.invalidateQueries("add_products")},onError:r=>{console.log(r)},retry:{maxAttempts:3,delay:r=>r*1e3}}),me=r=>A({url:"/products/add_product_images",method:"post",data:r}),{mutate:xe,isLoading:he}=v(me,{onSuccess:r=>{console.log(r==null?void 0:r.data),D.invalidateQueries("add_products")},onError:r=>{console.log(r)},retry:{maxAttempts:3,delay:r=>r*1e3}}),_e=r=>{const o=new FormData,i=new FormData;if(o.append("product_id",r),o.append("session_id",_),i.append("product_id",r),i.append("session_id",_),o.append("main_image",b[0]),(b==null?void 0:b.length)>0)for(var u=1;u<b.length;u++)i.append("images[]",b[u]);Ie(o),xe(i)},[d,ge]=n.useState({}),[ye,be]=n.useState({}),[fe,je]=n.useState([]);n.useEffect(()=>{var r,o,i,u;ne((r=x==null?void 0:x.data)==null?void 0:r.product_data),ge((o=x==null?void 0:x.data)==null?void 0:o.product_data),be((i=x==null?void 0:x.data)==null?void 0:i.p_attr_desc_data),je((u=x==null?void 0:x.data)==null?void 0:u.prod_size_data)},[x]),n.useEffect(()=>{const r=new FormData;r.append("category_4_id",d==null?void 0:d.product_category4_id),Y.mutate(r),ie(!1)},[d]),console.log(fe);const H=[{label:"1 Day",value:1},{label:"2 Days",value:2},{label:"3 Days",value:3},{label:"4 Days",value:4},{label:"5 Days",value:5},{label:"6 Days",value:6},{label:"7 Days",value:7},{label:"8 Days",value:8},{label:"9 Days",value:9},{label:"10 Days",value:10},{label:"11 Days",value:11},{label:"12 Days",value:12},{label:"13 Days",value:13},{label:"14 Days",value:14},{label:"15 Days",value:15}];return F||ce||he||oe||ue?e.jsx("h2",{className:"text-5xl text-red-500 h-screen flex justify-center items-center",children:"Loading...."}):X?e.jsxs("h2",{className:"text-center my-20 text-3xl",children:[le.message," "]}):e.jsx("div",{className:"bg-white mx-2 mt-2 p-1 py-4 sm:p-4",children:e.jsxs("div",{className:"py-4 sm:p-4",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl font-medium my-4 flex items-center",children:["Upload Product Images",e.jsx("sup",{children:e.jsx(Be,{className:"text-[10px]"})})," "]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-2 sm:p-5 border-spacing-80    ",children:[e.jsxs("p",{className:"text-[12px] p-1 bg-gray-100 text-gray-600 px-4 w-fit",children:[e.jsx("sup",{children:"*"}),"Minimum 1 and Maximum 5 Images"," "]}),e.jsxs("div",{className:" flex space-x-6 items-center my-6",children:[(b==null?void 0:b.length)>0&&e.jsx("div",{className:"flex space-x-5",children:b==null?void 0:b.map((r,o)=>e.jsxs("div",{className:"h-20 w-20 sm:h-32 sm:w-32 relative",children:[o!==0?e.jsx(Oe,{className:"text-2xl bg-cyan-500 rounded-full text-white float-right text-right absolute -right-2 -top-2 cursor-pointer",onClick:()=>ze(o)}):"",e.jsx("img",{src:URL.createObjectURL(r),alt:`Selected ${o}`,className:"object-cover w-full h-full rounded-md border-2 border-dashed border-cyan-300"}),e.jsx("label",{htmlFor:`file-upload-${o}`,className:"capitalize text-cyan-600 underline text-sm text-center hover:text-black hover:font-semibold cursor-pointer",children:o===0?"Change Main Image":"Change Image"}),e.jsx("input",{id:`file-upload-${o}`,type:"file",multiple:!0,className:"hidden",onChange:i=>pe(i,o)})]},o))}),e.jsxs("label",{htmlFor:"file-upload",className:"h-20 w-20 sm:h-32 sm:w-32 rounded-md border-2 border-dashed border-cyan-300 bg-cyan-50 text-cyan-700 flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(Ve,{className:"text-2xl sm:text-4xl"}),e.jsx("p",{className:"text-[10px] sm:text-[12px]",children:" Upload File"})]}),e.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:de})]})]}),e.jsx("div",{className:"my-5",children:e.jsxs("form",{action:"",className:"text-sm sm:text-lg",children:[e.jsxs("label",{htmlFor:"PRODUCT_name",className:"block sm:flex justify-between items-center ",children:[e.jsxs("p",{children:["Name",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",name:"product_title",value:l.product_title,placeholder:"Enter product name",onChange:N,onBlur:z,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none sm:w-[85%] "})]}),m.product_title&&C.product_title&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.product_title}),e.jsxs("label",{htmlFor:"product_catogory",className:"block sm:flex justify-between items-center mt-4",children:[e.jsxs("p",{children:["Category",e.jsx("sup",{children:"*"})]}),e.jsx(n.Suspense,{fallback:"loading",children:e.jsx(Ze,{category1Id:d==null?void 0:d.product_category1_id,category2Id:d==null?void 0:d.product_category2_id,category3Id:d==null?void 0:d.product_category3_id,category4Id:d==null?void 0:d.product_category4_id})})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"MRP",className:"w-[48%]",children:[e.jsxs("p",{children:["MRP",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",name:"mrp",value:l.mrp,onChange:N,onBlur:z,placeholder:"MRP....",className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),m.mrp&&C.mrp&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.mrp})]}),e.jsxs("label",{htmlFor:"discount",className:"w-[48%]",children:[e.jsxs("p",{children:["Discount",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",placeholder:"Discount",name:"discount_percent",onChange:N,onBlur:z,value:l.discount_percent,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),m.discount_percent&&C.discount_percent&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.discount_percent})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"SellPrice",className:"w-[48%]",children:[e.jsxs("p",{children:["Sell Price",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Sell Price",name:"price",value:Math.round((l==null?void 0:l.mrp)-(l==null?void 0:l.discount_percent)/100*(l==null?void 0:l.mrp)),readOnly:!0,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),m.product_price&&C.product_price&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.product_price})]}),e.jsxs("label",{htmlFor:"Gst",className:"w-[48%]",children:[e.jsxs("p",{children:["Gst Category",e.jsx("sup",{children:"*"})]}),e.jsx(W,{sx:{m:"5px 0 5px 0",minWidth:"100%",border:"none","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid black"}},size:"small",children:e.jsxs(J,{labelId:"demo-select-small-label",id:"demo-select-small",name:"gst_category_id",value:l.gst_category_id,onChange:N,onBlur:z,children:[e.jsx(I,{value:"",children:e.jsx("em",{children:"None"})}),(T==null?void 0:T.data.data)&&((ee=T==null?void 0:T.data)==null?void 0:ee.data.map(r=>e.jsxs(I,{value:r.category_id,children:[r.gst_percent," %"]},r.category_id)))]})}),m.gst_category_id&&C.gst_category_id&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.gst_category_id})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"HSN",className:"w-[48%]",children:[e.jsxs("p",{children:["HSN Code",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",placeholder:"HSN Code...",name:"hsn_code",value:l.hsn_code,onChange:N,onBlur:z,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),m.hsn_code&&C.hsn_code&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.hsn_code})]}),e.jsxs("label",{htmlFor:"SIZE",className:"w-[48%]",children:[e.jsxs("p",{children:["Product Size",e.jsx("sup",{children:"*"})]}),e.jsxs("div",{className:"c500:relative",children:[e.jsx("div",{className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none cursor-pointer",onClick:a,children:V||"Select"}),M&&G&&e.jsxs("div",{className:"absolute mt-1 left-[10%] c500:left-0 c500:w-full bg-white border z-10 border-gray-300 rounded-md shadow-sm p-2 h-[280px] c500:h-[200px]  ",children:[e.jsxs("div",{className:"flex flex-wrap space-x-2 md:space-x-5 h-[220px] c500:h-[140px] space-y-4 overflow-y-auto whitespace-nowrap ",children:[e.jsx("label",{htmlFor:""}),G&&G.map(r=>e.jsxs("label",{className:" py-1 px-4 hover:bg-cyan-50 ",children:[e.jsx("input",{type:"checkbox",name:"option",value:r.title,checked:L.includes(r.title),onChange:o=>K(o,r.id),className:" transform scale-150 mr-1 accent-cyan-700  bg-grey-700  rounded cursor-pointer"},r.id),"  ",r.title]},r.id))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:p,className:" btn1 text-sm py-[8px]",children:"Clear All"}),e.jsx("button",{onClick:w,className:"btn2 text-sm py-1",children:"Apply"})]})]})]})]})]}),e.jsx("div",{className:"border border-blue-gray-50 my-4 overflow-x-auto whitespace-nowrap ",children:e.jsx(Je,{selectedValues:R,values:l,setSelectedValues:B,inputSizeValue:V,setInputSizeValue:$,setSelectedSizeOptions:P})}),e.jsx(n.Suspense,{fallback:"loading",children:e.jsx(We,{category_last_id:d==null?void 0:d.product_category4_id,attributesID:Q,setAttributeID:k,data:ye})}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"MRP",className:"w-[48%]",children:[e.jsxs("p",{children:["Return Time (Day)",e.jsx("sup",{children:"*"})]}),e.jsx(W,{sx:{border:"none","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid black"}},size:"small",className:"w-full my-2 p-2",children:e.jsxs(J,{labelId:"demo-select-small-label",id:"demo-select-small",name:"return_period_time",className:"w-full my-2",value:l==null?void 0:l.return_period_time,onChange:N,onBlur:z,children:[e.jsx(I,{value:"0",children:e.jsx("em",{children:"No Return"})}),(H==null?void 0:H.length)>0&&H.map((r,o)=>e.jsxs(I,{value:r.value,children:[" ",r.label]},o))]})}),m.return_period_time&&C.return_period_time&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.return_period_time})]}),e.jsxs("label",{htmlFor:"discount",className:"w-[48%]",children:[e.jsxs("p",{children:["Low Stock Alert (Quantity)",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",placeholder:"Low stock alert",name:"product_low_quantity_stock",onChange:N,onBlur:z,value:l.product_low_quantity_stock,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none"}),m.product_low_quantity_stock&&C.product_low_quantity_stock&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.product_low_quantity_stock})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"MRP",className:"w-[48%]",children:[e.jsxs("p",{children:["Product Net weight (gm)",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",name:"product_weight",value:l.product_weight,onChange:N,onBlur:z,placeholder:"Product Net weight",className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),m.product_weight&&C.product_weight&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.product_weight})]}),e.jsxs("label",{htmlFor:"country",className:"w-[48%]",children:[e.jsx("p",{children:" Country Of Origin* "}),e.jsx(W,{sx:{border:"none","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid black"}},size:"small",className:"w-full my-2 p-2 sm:w-[78%]",children:e.jsxs(J,{labelId:"demo-select-small-label",id:"demo-select-small",name:"country_origin",className:"w-full my-2",value:l==null?void 0:l.country_origin,onChange:r=>ae("country_origin",r.target.value),onBlur:z,children:[e.jsx(I,{value:"",children:e.jsx("em",{children:"None"})}),(E==null?void 0:E.length)>0&&(E==null?void 0:E.map((r,o)=>e.jsxs(I,{value:r,children:[" ",r]},o)))]})})]}),m.country_origin&&C.country_origin?e.jsx("h5",{style:{color:"red"},className:"error-para text-left sm:text-center ",children:m.country_origin}):""]}),e.jsxs("label",{htmlFor:"MANUFACTURE",children:[e.jsxs("p",{children:["Manufactured By",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",onChange:N,name:"manufactured_by",onBlur:z,value:l.manufactured_by,placeholder:"Manufactured By",className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm placeholder:text-gray-400 outline-none "}),m.manufactured_by&&C.manufactured_by&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:m.manufactured_by})]}),e.jsxs("div",{className:"w-full my-4",children:[e.jsxs("p",{className:"my-2",children:["Production Description",e.jsx("span",{className:"ml-1 text-[12px] sm:text-sm text-gray-400",children:"(optional)"})]}),e.jsx("div",{className:"w-full h-[100px] bg-[#ECEFF1]",children:e.jsx(qe,{id:"outlined-textarea",placeholder:"Enter Product Description",name:"product_desc",value:l.product_desc,onChange:N,onBlur:z,multiline:!0,rows:5,sx:{width:"100%",height:"100%","& .MuiInputBase-root":{backgroundColor:"#ECEFF1"}}})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("hr",{}),e.jsx("br",{}),e.jsxs("div",{className:"my-2 flex justify-between c500:flex-row text-sm font-semibold",children:[e.jsx("button",{type:"button",className:"btn2",onClick:()=>location.reload(),children:"Clear Details"}),e.jsx("button",{type:"submit",className:"btn1",onClick:Se,children:"Submit"})]})]})})]})})},Xe=n.lazy(()=>Z(()=>import("./Attribute-c421065f.js"),["assets/Attribute-c421065f.js","assets/index-70997a97.js","assets/index-52a015f8.css"])),Ye=n.lazy(()=>Z(()=>import("./Tables-4ef7c72d.js"),["assets/Tables-4ef7c72d.js","assets/index-70997a97.js","assets/index-52a015f8.css","assets/Button-da6a835c.js"])),Ge=n.lazy(()=>Z(()=>import("./MainCategoryForAddVariant-9793a604.js"),["assets/MainCategoryForAddVariant-9793a604.js","assets/index-70997a97.js","assets/index-52a015f8.css"])),it=()=>{var De,Me,Pe;const{product_id:x}=Ue(),D=Ae(),_=Ee(),M=ve(),[U,L]=n.useState(!1),[P,V]=n.useState([]),[$,R]=n.useState(!0),[B,Q]=n.useState(),[k,E]=n.useState([]),[y,te]=n.useState({}),[Ne,re]=n.useState([]),se=t=>A({url:"products/get_product",method:"post",data:t}),{mutate:oe,isLoading:we}=v(se,{onSuccess:t=>{var s,c,h;le((s=t==null?void 0:t.data)==null?void 0:s.product_data),l(t==null?void 0:t.data),te((c=t==null?void 0:t.data)==null?void 0:c.product_data),K((h=t==null?void 0:t.data)==null?void 0:h.product_data),_.invalidateQueries("add_products")},onError:t=>{console.log(t)},retry:{maxAttempts:3,delay:t=>t*1e3}}),[g,l]=n.useState(n.useMemo(()=>{const t=_.getQueryData("add_products");return t?t.data:null},[_]));n.useEffect(()=>{if(!M)D("/login");else{const t=new FormData;t.append("session_id",M),t.append("product_id",x),oe(t)}},[x,M]);const m=t=>A({url:"/products/edit_product",method:"post",data:t}),{mutate:C,isLoading:z}=v(m,{onSuccess:t=>{var s,c,h;(s=t==null?void 0:t.data)!=null&&s.success?j.success((c=t==null?void 0:t.data)==null?void 0:c.message):j.error((h=t==null?void 0:t.data)==null?void 0:h.message),_.invalidateQueries("edit_product")},onError:t=>{j.error(t)},retry:{maxAttempts:3,delay:t=>t*1e3}}),[N,Se]=n.useState([]),[ne,ae]=n.useState({country_origin:"",discount_percent:"",hsn_code:"",images:"",is_variation_available:"",main_image:"",manufactured_by:"",mrp:"",price:"",product_category1_id:"",product_category2_id:"",product_category3_id:"",product_category4_id:"",product_desc:"",product_id:"",product_main_attribute_value_id:"",product_main_attribute_value_title:"",product_title:"",product_variation_attribute_value_id:"",product_variation_attribute_value_title:"",product_weight:"",quantity_available:"",return_period_time:"",seller_id:""});n.useState(()=>{const t=localStorage.getItem("tabs");return t?JSON.parse(t):[{id:1,title:"Tab 1"}]}),n.useState(()=>{const t=localStorage.getItem("activeTab");return t?parseInt(t):1});const K=t=>{var c;const s=(c=t==null?void 0:t.images)==null?void 0:c.split(",");Q(t==null?void 0:t.main_image),E([...k,...s])};let{values:a,errors:p,touched:w,handleBlur:S,handleChange:F,handleSubmit:T,setFieldValue:X,setValues:le}=Qe({initialValues:ne,onSubmit:t=>{ae(t);const s=new FormData;s.append("session_id",M),s.append("product_title",t==null?void 0:t.product_title),s.append("product_id",t==null?void 0:t.product_id),s.append("hsn_code",t==null?void 0:t.hsn_code),s.append("product_low_quantity_stock",t==null?void 0:t.product_low_quantity_stock),s.append("return_period_time",t==null?void 0:t.return_period_time),s.append("product_weight",t==null?void 0:t.product_weight),s.append("product_desc",t==null?void 0:t.product_desc),s.append("quantity",t==null?void 0:t.quantity_available),s.append("mrp",t==null?void 0:t.mrp),s.append("price",t==null?void 0:t.price),s.append("gst_category_id",t==null?void 0:t.gst_category_id),s.append("country_origin",t==null?void 0:t.country_origin),s.append("manufactured_by",t==null?void 0:t.manufactured_by),C(s)}});n.useEffect(()=>{fetch("https://restcountries.com/v3.1/all").then(t=>t.json()).then(t=>V(t.map(s=>s.name.common)))},[]);const Ce=t=>A({url:"datas/get_product_categories1",method:"post",data:t}),{mutate:Y,isLoading:G}=v(Ce,{onSuccess:t=>{var s;ce((s=t==null?void 0:t.data)==null?void 0:s.data),_.invalidateQueries("parent_category")},onError:t=>{console.log(t)},retry:{maxAttempts:3,delay:t=>t*1e3}}),[ke,ce]=n.useState(n.useMemo(()=>{const t=_.getQueryData("parent_category");return t?t.data:null},[_]));n.useCallback(()=>{const t=new FormData;Y(t)},[Y]);const ie=()=>Le.get("https://nearo.in/seller_app/index.php/seller/datas/get_gst_categories"),{isLoading:b,data:O,isError:de,error:pe,isFetching:ze}=Re("gstData",ie);v(t=>A({url:"/datas/get_product_sizes",method:"post",data:t}),{onSuccess:t=>{var s;ue((s=t==null?void 0:t.data)==null?void 0:s.data),_.invalidateQueries("product_Size")},onError:t=>{console.log(t)},retry:{maxAttempts:3,delay:t=>t*1e3}});const[Ie,ue]=n.useState(n.useMemo(()=>{const t=_.getQueryData("product_Size");return t?t.data:null},[_]));n.useEffect(()=>{var s;new FormData().append("category_4_id",N&&((s=N[3])==null?void 0:s.category_id)),R(!1)},[N]);const me=t=>{const c=Array.from(t.target.files).filter(h=>h.type.startsWith("image/"));E([...k,...c]),i(c)},xe=(t,s)=>{const c=t.target.files[0];if(c&&c.type.startsWith("image/")){const h=[...k];h[s]=c,E(h)}i(c)},he=t=>{const s=t.target.files[0];s&&s.type.startsWith("image/")&&Q(s),o(s)},_e=t=>A({url:"products/remove_product_image/",method:"post",data:t}),{mutate:d,isLoading:ge}=v(_e,{onSuccess:t=>{var s,c,h;(s=t==null?void 0:t.data)!=null&&s.success?j.success((c=t==null?void 0:t.data)==null?void 0:c.message):j.error((h=t==null?void 0:t.data)==null?void 0:h.message),_.invalidateQueries("add_products")},onError:t=>{j.error(t)},retry:{maxAttempts:3,delay:t=>t*1e3}}),ye=t=>{const s=k.filter((h,Te)=>Te!==t),c=new FormData;c.append("session_id",M),c.append("product_id",x),c.append("image_index",t),d(c),E(s)},be=t=>A({url:"products/update_product_main_image/",method:"post",data:t}),{mutate:fe,isLoading:je}=v(be,{onSuccess:t=>{var s,c,h;(s=t==null?void 0:t.data)!=null&&s.success?j.success((c=t==null?void 0:t.data)==null?void 0:c.message):j.error((h=t==null?void 0:t.data)==null?void 0:h.message),_.invalidateQueries("add_products")},onError:t=>{j.error(t)},retry:{maxAttempts:3,delay:t=>t*1e3}}),H=t=>A({url:"products/add_product_images/",method:"post",data:t}),{mutate:ee,isLoading:r}=v(H,{onSuccess:t=>{var s,c,h;(s=t==null?void 0:t.data)!=null&&s.success?j.success((c=t==null?void 0:t.data)==null?void 0:c.message):j.error((h=t==null?void 0:t.data)==null?void 0:h.message),_.invalidateQueries("add_products")},onError:t=>{j.error(t)},retry:{maxAttempts:3,delay:t=>t*1e3}});n.useState(n.useMemo(()=>{const t=_.getQueryData("add product");return t?t.data:null},[_]));const o=t=>{const s=new FormData;s.append("product_id",x),s.append("session_id",M),s.append("main_image",t),fe(s)},i=t=>{const s=new FormData;s.append("product_id",x),s.append("session_id",M);for(var c=0;c<t.length;c++)s.append("images[]",t[c]);ee(s)},u=t=>{D(`/dashboard/add_product/edit/${t}`)},f=t=>{console.log("Selected option:",t)},q=[{label:"1 Day",value:1},{label:"2 Days",value:2},{label:"3 Days",value:3},{label:"4 Days",value:4},{label:"5 Days",value:5},{label:"6 Days",value:6},{label:"7 Days",value:7},{label:"8 Days",value:8},{label:"9 Days",value:9},{label:"10 Days",value:10},{label:"11 Days",value:11},{label:"12 Days",value:12},{label:"13 Days",value:13},{label:"14 Days",value:14},{label:"15 Days",value:15}];return b||$||je||r||ge||we?e.jsx("h2",{className:"text-5xl text-red-500 h-screen flex justify-center  items-center",children:"Loading...."}):de?e.jsxs("h2",{className:"text-center my-20 text-3xl",children:[pe.message," "]}):e.jsxs("div",{className:"bg-white mx-2 mt-2 p-1 py-4 sm:p-4",children:[e.jsxs("div",{className:"flex overflow-x-auto whitespace-nowrap w-full space-x-5",children:[(De=g==null?void 0:g.p_variation_data)==null?void 0:De.map((t,s)=>e.jsx("button",{className:`py-2 px-4 text-sm font-medium  ${t.product_id===x?"bg-cyan-50 text-cyan-700 border-x border-gray-400 border-t ":""}`,onClick:()=>u(t==null?void 0:t.product_id),children:s===0?"Main Product":`Variant ${s} `},t.id)),e.jsxs("button",{className:"btn2 mx-4 flex items-center font-semibold text-sm ",onClick:()=>L(!0),children:[e.jsx($e,{className:"text-xl"}),"  Add Variant"]})]}),e.jsx("div",{className:"py-4 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-b-lg",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl font-medium my-4 flex items-center",children:["Edit Product",e.jsx("sup",{children:e.jsx(Be,{className:"text-[10px]"})})," "]}),U&&e.jsx(He,{open:U,onNo:()=>L(!1),size:"md",title:"Add Variant",children:e.jsx(Ke,{data:g})}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-2 sm:p-5 border-spacing-80    ",children:[e.jsxs("p",{className:"text-[12px] p-1 bg-gray-100 text-gray-600 px-4 w-fit",children:[e.jsx("sup",{children:"*"}),"Minimum 1 and Maximum 5 Images"," "]}),e.jsxs("div",{className:" flex space-x-6 items-center my-6",children:[e.jsx("div",{className:"flex space-x-5",children:B&&e.jsxs("div",{className:"h-20 w-20 sm:h-32 sm:w-32 relative",children:[e.jsx("img",{src:/^(ftp|http|https):\/\/[^ "]+$/.test(B)?B:URL.createObjectURL(B),alt:"Selected 0",className:"object-cover w-full h-full rounded-md border-2 border-dashed border-cyan-300"}),e.jsx("label",{htmlFor:"file-upload-0",className:"capitalize text-cyan-600 underline text-sm text-center hover:text-black hover:font-semibold cursor-pointer",children:"Change Main Image"}),e.jsx("input",{id:"file-upload-0",type:"file",className:"hidden",onChange:t=>he(t)})]})}),(k==null?void 0:k.length)>0&&e.jsx("div",{className:"flex space-x-5",children:k==null?void 0:k.map((t,s)=>e.jsxs("div",{className:"h-20 w-20 sm:h-32 sm:w-32 relative",children:[e.jsx(Oe,{className:"text-2xl bg-cyan-500 rounded-full text-white float-right text-right absolute -right-2 -top-2 cursor-pointer",onClick:()=>ye(s)}),e.jsx("img",{src:(/^(ftp|http|https):\/\/[^ "]+$/.test(t),t),alt:`Selected ${s}`,className:"object-cover w-full h-full rounded-md border-2 border-dashed border-cyan-300"}),e.jsx("label",{htmlFor:`file-upload-${s}`,className:"capitalize text-cyan-600 underline text-sm text-center hover:text-black hover:font-semibold cursor-pointer",children:"Change Image"}),e.jsx("input",{id:`file-upload-${s}`,type:"file",className:"hidden",onChange:c=>xe(c,s)})]},s))}),e.jsxs("label",{htmlFor:"file-upload",className:"h-20 w-20 sm:h-32 sm:w-32 rounded-md border-2 border-dashed border-cyan-300 bg-cyan-50 text-cyan-700 flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(Ve,{className:"text-2xl sm:text-4xl"}),e.jsx("p",{className:"text-[10px] sm:text-[12px] ",children:" Upload File"})]}),e.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:me})]})]}),e.jsx("div",{className:"my-5",children:e.jsxs("form",{action:"",className:"text-sm sm:text-lg",children:[e.jsxs("label",{htmlFor:"PRODUCT_name",className:"block sm:flex justify-between items-center ",children:[e.jsxs("p",{children:["Name",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",name:"product_title",value:a==null?void 0:a.product_title,placeholder:"Enter product name",onChange:F,onBlur:S,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none sm:w-[85%] "})]}),p.product_title&&w.product_title&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.product_title}),e.jsxs("label",{htmlFor:"product_catogory",className:"block sm:flex justify-between items-center mt-4",children:[e.jsxs("p",{children:["Category",e.jsx("sup",{children:"*"})]}),e.jsx(n.Suspense,{fallback:"loading",children:e.jsx(Ge,{category1Id:y==null?void 0:y.product_category1_id,category2Id:y==null?void 0:y.product_category2_id,category3Id:y==null?void 0:y.product_category3_id,category4Id:y==null?void 0:y.product_category4_id})})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"MRP",className:"w-[48%]",children:[e.jsxs("p",{children:["MRP",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",name:"mrp",value:a==null?void 0:a.mrp,onChange:F,onBlur:S,placeholder:"MRP....",className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),p.mrp&&w.mrp&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.mrp})]}),e.jsxs("label",{htmlFor:"discount",className:"w-[48%]",children:[e.jsxs("p",{children:["Discount",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",placeholder:"Discount",name:"discount_percent",onChange:F,onBlur:S,value:a==null?void 0:a.discount_percent,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),p.discount_percent&&w.discount_percent&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.discount_percent})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"SellPrice",className:"w-[48%]",children:[e.jsxs("p",{children:["Sell Price",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Sell Price",name:"price",value:Math.round((a==null?void 0:a.mrp)-(a==null?void 0:a.discount_percent)/100*(a==null?void 0:a.mrp)),readOnly:!0,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),p.price&&w.price&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.price})]}),e.jsxs("label",{htmlFor:"Gst",className:"w-[48%]",children:[e.jsxs("p",{children:["Gst Category",e.jsx("sup",{children:"*"})]}),e.jsx(W,{sx:{m:"5px 0 5px 0",minWidth:"100%",border:"none","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid black"}},size:"small",children:e.jsxs(J,{labelId:"demo-select-small-label",id:"demo-select-small",name:"gst_category_id",value:a==null?void 0:a.gst_category_id,onChange:t=>X("gst_category_id",t.target.value),onBlur:S,children:[e.jsx(I,{value:"",children:e.jsx("em",{children:"None"})}),(O==null?void 0:O.data.data)&&((Me=O==null?void 0:O.data)==null?void 0:Me.data.map(t=>e.jsxs(I,{value:t.category_id,children:[t.gst_percent," %"]},t.category_id)))]})}),p.gst_category_id&&w.gst_category_id&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.gst_category_id})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"HSN",className:"w-[48%]",children:[e.jsxs("p",{children:["HSN Code",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",placeholder:"HSN Code...",name:"hsn_code",value:a==null?void 0:a.hsn_code,onChange:F,onBlur:S,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),p.hsn_code&&w.hsn_code&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.hsn_code})]}),e.jsxs("label",{htmlFor:"HSN",className:"w-[48%]",children:[e.jsxs("p",{children:["Quantity",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Quantity Available",name:"quantity_available",value:a==null?void 0:a.quantity_available,onChange:F,onBlur:S,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),p.quantity_available&&w.quantity_available&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.quantity_available})]})]}),e.jsx("div",{className:"border border-blue-gray-50 my-4 overflow-x-auto whitespace-nowrap ",children:(g==null?void 0:g.prod_size_data)&&e.jsx(Ye,{data:g==null?void 0:g.prod_size_data})}),e.jsx("div",{className:"flex justify-between mt-4 items-center",children:e.jsx(n.Suspense,{fallback:"loading",children:e.jsx(Xe,{category_last_id:y==null?void 0:y.product_category4_id,data:g==null?void 0:g.p_attr_desc_data,onSelect:f,attributesID:Ne,setAttributeID:re,productId:(Pe=g==null?void 0:g.product_data)==null?void 0:Pe.product_id})})}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"MRP",className:"w-[48%]",children:[e.jsxs("p",{children:["Return Time (Day)",e.jsx("sup",{children:"*"})]}),e.jsx(W,{sx:{border:"none","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid black"}},size:"small",className:"w-full my-2 p-2",children:e.jsxs(J,{labelId:"demo-select-small-label",id:"demo-select-small",name:"return_period_time",className:"w-full my-2",value:a==null?void 0:a.return_period_time,onChange:F,onBlur:S,children:[e.jsx(I,{value:"0",children:e.jsx("em",{children:"No Return"})}),(q==null?void 0:q.length)>0&&q.map((t,s)=>e.jsxs(I,{value:t.value,children:[" ",t.label]},s))]})}),p.return_period_time&&w.return_period_time&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.return_period_time})]}),e.jsxs("label",{htmlFor:"discount",className:"w-[48%]",children:[e.jsxs("p",{children:["Low Stock Alert (Quantity)",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",placeholder:"Low stock margin",name:"product_low_quantity_stock",onChange:F,onBlur:S,value:a==null?void 0:a.product_low_quantity_stock,className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none"}),p.product_low_quantity_stock&&w.product_low_quantity_stock&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.product_low_quantity_stock})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 items-center",children:[e.jsxs("label",{htmlFor:"weight",className:"w-[48%]",children:[e.jsxs("p",{children:["Product Net weight (gm)",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"number",name:"product_weight",value:a==null?void 0:a.product_weight,onChange:F,onBlur:S,placeholder:"Product Net weight",className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm focus: placeholder:text-gray-400 outline-none "}),p.product_weight&&w.product_weight&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.product_weight})]}),e.jsxs("label",{htmlFor:"country",className:"w-[48%]",children:[e.jsx("p",{children:" Country of origin "}),e.jsx(W,{sx:{border:"none","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid black"}},size:"small",className:"w-full my-2 p-2 sm:w-[78%]",children:e.jsxs(J,{labelId:"demo-select-small-label",id:"demo-select-small",name:"country_origin",className:"w-full my-2",value:a==null?void 0:a.country_origin,onChange:t=>X("country_origin",t.target.value),onBlur:S,children:[e.jsx(I,{value:"",children:e.jsx("em",{children:"None"})}),(P==null?void 0:P.length)>0&&(P==null?void 0:P.map((t,s)=>e.jsxs(I,{value:t,children:[" ",t]},s)))]})})]}),p.country_origin&&w.country_origin?e.jsx("h5",{style:{color:"red"},className:"error-para text-left sm:text-center ",children:p.country_origin}):""]}),e.jsx("div",{className:"w-full mt-4",children:e.jsxs("label",{htmlFor:"MANUFACTURE",children:[e.jsxs("p",{children:["Manufactured By",e.jsx("sup",{children:"*"})]}),e.jsx("input",{type:"text",onChange:F,name:"manufactured_by",onBlur:S,value:a==null?void 0:a.manufactured_by,placeholder:"Manufactured By",className:"w-full my-2 p-2 py-[10px] text-sm border border-gray-300 hover:border-black rounded-sm placeholder:text-gray-400 outline-none "}),p.manufactured_by&&w.manufactured_by&&e.jsx("p",{className:"text-red-500 text-sm text-left sm:text-center capitalize",children:p.manufactured_by})]})}),e.jsxs("div",{className:"w-full my-4",children:[e.jsxs("p",{className:"my-2",children:["Production Description",e.jsx("span",{className:"text-[12px] sm:text-sm text-gray-400 ml-2",children:"(optional)"})]}),e.jsx("div",{className:"w-full bg-[#ECEFF1]",children:e.jsx(qe,{id:"outlined-textarea",placeholder:"Enter Product Description",name:"product_desc",value:a==null?void 0:a.product_desc,onChange:F,onBlur:S,multiline:!0,rows:5,sx:{width:"100%",height:"100%","& .MuiInputBase-root":{backgroundColor:"#ECEFF1"}}})})]}),e.jsxs("div",{className:"my-2 flex justify-between c500:flex-row text-sm font-semibold",children:[e.jsx("button",{type:"button",className:"btn2",children:"Clear Details"}),e.jsx("button",{type:"submit",className:"btn1",onClick:T,children:"Submit"})]})]})})]})})]})};export{it as default};

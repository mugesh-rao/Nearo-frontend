import{b as U,a as W,r as l,i as X,k as C,j as e,a2 as S,s as P,d as Y,e as k}from"./index-70997a97.js";import{d as Z}from"./KeyboardArrowLeft-448a38e0.js";import{u as J,s as K}from"./index-cd29d591.js";import{P as ee,a as se}from"./index.esm-267541a1.js";import{e as te,f as re}from"./index.esm-34bd9e10.js";import{B as ae}from"./Button-da6a835c.js";import{C as D}from"./CircularProgress-73940f8d.js";const le="/assets/Humaaans - Wireframe-72610487.png";let ne={name:"",email:"",phoneNumber:"",otp:"",password:""};const de=()=>{const h=U(),o=W(),[b,p]=l.useState(59),[c,j]=l.useState(!1),y=X();let{values:x,errors:n,touched:i,handleBlur:m,handleChange:u,handleSubmit:A}=J({initialValues:ne,validationSchema:K,onSubmit:s=>{const r={...s,session_id:t==null?void 0:t.session_id};o({type:"storePersonalDetails",payload:r}),l.startTransition(()=>{o({type:"signUp"}),h("/signup/shopdetails")})}});l.useEffect(()=>{o({type:"falselog"}),o({type:"falser"})},[]);const F=()=>{h(-1),o({type:"truer"}),o({type:"truelog"})},[f,E]=l.useState(!0),O=()=>{E(!f)},[a,B]=l.useState(""),T=s=>{const{name:r}=s.target,w=s.target.value.replace(/\D/g,"");r==="phoneNumber"&&B(w),u(s)},[g,L]=l.useState(),I=s=>k({url:"/login/send_registration_otp",method:"post",data:s}),{mutate:M,isLoading:v}=C(I,{onSuccess:s=>{console.log("sucess_data",s),L(s==null?void 0:s.data),z(!0),(s==null?void 0:s.data.success)==0?(P.error(s==null?void 0:s.data.message),h(`/${s==null?void 0:s.data.redirect}`)):(s==null?void 0:s.data.success)==1&&P.success(s==null?void 0:s.data.message),y.invalidateQueries("sendphone_no")},onError:s=>{console.log("err",s)},retry:{maxAttempts:3,delay:s=>s*1e3}}),[N,z]=l.useState(!1),Q=async s=>{s.preventDefault();const r=new FormData;r.append("phone_no",a),M(r),!c&&b==59&&(j(!0),p(59))},R=s=>k({url:"/login/verify_registration_otp",method:"post",data:s}),[t,V]=l.useState(),{mutate:_,isLoading:q}=C(R,{onSuccess:s=>{V(s==null?void 0:s.data),Y.set("session_id",s==null?void 0:s.data.session_id,{expires:7}),y.invalidateQueries("verify-otp")},onError:s=>{console.log(s)},retry:{maxAttempts:3,delay:s=>s*1e3}}),G=s=>{const{name:r,value:w}=s.target;r==="otp"&&$(w),u(s)},[d,$]=l.useState("");l.useEffect(()=>{d.length===6&&(H(),j(!1),p(59))},[d]);const H=async()=>{const s=new FormData;s.append("phone_no",a),s.append("otp_key",g==null?void 0:g.otp_key),s.append("otp",d);try{await _(s)}catch(r){console.error("Error during OTP verification:",r)}};return l.useEffect(()=>{let s;return c&&(s=setInterval(()=>{p(r=>r>0?r-1:(j(!1),p(59),59))},1e3)),()=>clearInterval(s)},[c]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"personal mt-20",children:[e.jsxs(ae,{variant:"text",sx:{margin:"-60px 0 0 2%"},onClick:F,children:[" ",e.jsx(Z,{})," Back"]}),e.jsxs("div",{className:" flex mx-auto w-[94%] justify-between items-center md:w-1/2 md:mx-12 ",children:[e.jsx("h1",{className:"text-2xl font-bold sm:text-3xl ",children:"Personal Details"}),e.jsxs("div",{children:[e.jsx("div",{className:"w-[100px] h-2 bg-[#6666] rounded-md",children:e.jsx("div",{className:"w-[30px] h-2 bg-[#1687a7] rounded-md "})}),e.jsx("p",{className:"text-center my-2 text-[#1687a7]",children:" Step 1/3"})]})]}),e.jsxs("div",{className:"login-box w-[94%] md:w-[74%] lg:w-[94%] rounded-xl mx-auto my-10 GAGAN  py-8 px-3 lg:px-8 lg:flex justify-between ",children:[e.jsx("div",{className:"lg:w-[55%]",children:e.jsxs("form",{action:"#",onSubmit:A,className:"w-full  text-[#5a5a5a] ",children:[e.jsxs("p",{className:"text-[1rem]",children:["Name",e.jsx("sup",{children:"*"})," "]}),e.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:x.name,onChange:u,onBlur:m,autoComplete:"new-password",onFocus:s=>s.target.setAttribute("autocomplete","new-password"),className:"w-full my-1 p-2 text-[.9rem] input-border placeholder:text-[#A2CFDC] outline-none text-[#1687a7] capitalize "}),n.name&&i.name&&e.jsx("p",{className:"text-red-500 text-sm",children:n.name}),e.jsx("br",{}),e.jsxs("div",{className:"flex justify-between sm:items-center flex-col sm:flex-row mt-2 ",children:[e.jsxs("div",{className:"w-full sm:w-[72%] ",children:[e.jsxs("p",{className:"text-[1rem]",children:["Phone Number",e.jsx("sup",{children:"*"})," "]}),e.jsx("input",{type:"number",name:"phoneNumber",placeholder:"PhoneNumber",className:"w-full my-1 p-2 text-[.9rem] input-border placeholder:text-[#A2CFDC] outline-none text-[#1687a7] ",value:x.phoneNumber,onChange:T,onBlur:m,autoComplete:"new-password",onFocus:s=>s.target.setAttribute("autocomplete","new-password")}),e.jsx("br",{}),n.phoneNumber&&i.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm",children:n.phoneNumber})]}),e.jsxs("div",{className:"w-full sm:w-[27%]  ",children:[e.jsx("p",{children:" "}),c?e.jsxs("button",{className:"w-full my-1 p-2 text-lg font-semibold sm:p-[5px] input-border text-[#1687a7] cursor-not-allowed",disabled:!0,children:["00:",b]}):e.jsx("button",{className:"w-full my-2 p-2 text-lg font-semibold sm:p-[5px] input-border text-[#1687a7] ",onClick:Q,type:"button",disabled:(a==null?void 0:a.length)!=10||v||(t==null?void 0:t.success)==1,children:v?e.jsx(D,{size:24}):N||c?"Resend OTP":"Send OTP"}),n.phoneNumber&&i.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm",children:" "})]})]}),(a==null?void 0:a.length)==10&&N?e.jsxs("p",{className:"text-[1rem] mt-2",children:["Enter OTP",e.jsx("sup",{children:"*"})," "]}):"",(a==null?void 0:a.length)==10&&N?e.jsxs("div",{className:" input-border text-black w-full flex items-center my-1",children:[e.jsx("input",{type:"number",name:"otp",placeholder:"Enter OTP",className:"w-full p-2 text-[.9rem] border-none rounded-lg placeholder:text-[#A2CFDC] outline-none text-[#1687a7] tracking-[20px] ",value:d,onChange:G,onBlur:m,maxLength:"6"}),e.jsx("div",{className:"mr-4",children:q?e.jsx(D,{size:20,thickness:4}):(t==null?void 0:t.success)==1?e.jsx(te,{className:"text-2xl text-green-600"}):(t==null?void 0:t.success)==0?e.jsx(re,{className:"text-2xl text-red-600"}):""})]}):"",n.otp&&i.otp&&a&&e.jsx("p",{className:"text-red-500 text-sm",children:n.otp}),(t==null?void 0:t.success)==0&&e.jsx("p",{className:"text-red-500 text-sm",children:"You have entered wrong otp !"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[1rem] mt-2",children:["Email",e.jsx("sup",{children:"*"})," "]}),e.jsx("input",{type:"email",name:"email",placeholder:"Email ID",value:x.email,onChange:u,onBlur:m,autoComplete:"new-password",onFocus:s=>s.target.setAttribute("autocomplete","new-password"),className:"w-full my-1 p-2 text-[.9rem] input-border placeholder:text-[#A2CFDC] outline-none text-[#1687a7] "}),n.email&&i.email&&e.jsx("p",{className:"text-red-500 text-sm",children:n.email})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[1rem] mt-2",children:["Password",e.jsx("sup",{children:"*"})," "]}),e.jsxs("div",{className:" input-border text-black w-full flex items-center my-1  ",children:[e.jsx("input",{type:f?"password":"text",placeholder:"Password",name:"password",value:x.password,onChange:u,onBlur:m,className:"w-full p-2 text-[.9rem] border-none rounded-lg  placeholder:text-[#A2CFDC] outline-none  text-[#1687a7] "}),e.jsx("div",{onClick:O,className:" cursor-pointer mx-1 text-[#1687a7]",children:f?e.jsx(ee,{className:"text-2xl"}):e.jsx(se,{className:"text-2xl"})})]}),n.password&&i.password&&e.jsx("p",{className:"text-red-500 text-sm",children:n.password})]}),e.jsx("br",{}),e.jsx("p",{className:" text-[#5a5a5a] ",children:"Make your password strong by adding:"})," ",e.jsxs("ul",{className:"text-sm font-extralight space-y-1 my-2",children:[e.jsxs("li",{children:[e.jsx("sup",{children:"*"}),"Minimum 8 characters (letters & numbers)"]}),e.jsxs("li",{children:[e.jsx("sup",{children:"*"}),"Minimum 1 special character (@ # $ % ! ^ & *)"]}),e.jsxs("li",{children:[e.jsx("sup",{children:"*"}),"Minimum 1 capital letter (A-Z)"]}),e.jsxs("li",{children:[e.jsx("sup",{children:"*"}),"Minimum 1 number (0-9)"]})]}),e.jsx("input",{type:"submit",name:"submit",value:"Submit and Next",className:"w-full my-2 p-[10px] font-semibold text-[.9rem] text-white bg-[#1687a7] rounded-lg cursor-pointer"}),e.jsxs("p",{className:"text-sm text-center sm:text-left",children:["By clicking you agree to our",e.jsx(S,{to:"/terms-and-conditions",className:"text-[#1687a7]",children:"Terms & Conditions"}),"and"," ",e.jsx(S,{to:"/privacy-policy",className:"text-[#1687a7]",children:"Privacy Policy"})]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("img",{src:le,alt:"ds",className:"my-14"})})]})]})})};export{de as default};
